(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{35323:(e,r,a)=>{Promise.resolve().then(a.bind(a,78648))},78648:(e,r,a)=>{"use strict";a.d(r,{DashboardShell:()=>P});var s=a(95155),t=a(74359),l=a(81180),n=a(12115),o=a(76046),i=a(67396),d=a(30858),c=a(37952),u=a(59136),m=a(68236),h=a(30098),p=a(29602);let b=[{href:"/dashboard",label:"Dashboard",icon:d.A},{href:"/tasks",label:"Tasks",icon:c.A},{href:"/analytics",label:"Analytics",icon:u.A},{href:"/settings",label:"Settings",icon:m.A},{href:"/upgrade",label:"Upgrade",icon:h.A}];function f(){let e=(0,o.usePathname)();return(0,s.jsx)("aside",{className:"fixed left-0 top-0 z-40 h-screen w-64 border-r border-[var(--border)] bg-[var(--card)]",children:(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[(0,s.jsx)("div",{className:"flex h-14 items-center border-b border-[var(--border)] px-4",children:(0,s.jsx)(i.default,{href:"/dashboard",className:"font-semibold text-[var(--color-accent)]",children:"TaskBloom"})}),(0,s.jsx)("nav",{className:"flex-1 space-y-1 p-2",children:b.map(r=>{let a=e===r.href||"/dashboard"!==r.href&&e.startsWith(r.href);return(0,s.jsxs)(i.default,{href:r.href,className:(0,p.cn)("flex items-center gap-3 rounded-xl px-3 py-2 text-sm font-medium transition-colors",a?"bg-[var(--color-primary)]/10 text-[var(--color-primary)]":"text-[var(--muted)] hover:bg-slate-100 hover:text-[var(--foreground)] dark:hover:bg-slate-800"),children:[(0,s.jsx)(r.icon,{className:"size-5"}),r.label]},r.href)})})]})})}var v=a(67113),x=a(20853),g=a(87725),y=a(22104),k=a(1466),N=a(65236),_=a(14085),j=a(21097);let w=j.bL,z=j.l9;j.YJ,j.ZL,j.Pb,j.z6;let U=n.forwardRef((e,r)=>{let{className:a,sideOffset:t=4,...l}=e;return(0,s.jsx)(j.ZL,{children:(0,s.jsx)(j.UC,{ref:r,sideOffset:t,className:(0,p.cn)("z-50 min-w-[8rem] overflow-hidden rounded-xl border border-[var(--border)] bg-[var(--card)] p-1 text-[var(--card-foreground)] shadow-glass","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",a),...l})})});U.displayName=j.UC.displayName;let A=n.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(j.q7,{ref:r,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-lg px-2 py-1.5 text-sm outline-none focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",a),...t})});A.displayName=j.q7.displayName;var C=a(73838);function F(){var e,r;let{theme:a,setTheme:n}=(0,v.D)(),i=(0,t.IT)(l.F.users.getCurrentUser),{signOut:d}=(0,C.B)(),c=(0,o.useRouter)();async function u(){await d(),c.push("/"),c.refresh()}return(0,s.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b border-[var(--border)] bg-[var(--card)] px-6",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-2 rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2",children:[(0,s.jsx)(x.A,{className:"size-4 text-[var(--muted)]"}),(0,s.jsx)("input",{type:"search",placeholder:"Search tasksâ€¦",className:"w-full bg-transparent text-sm outline-none placeholder:text-[var(--muted)]"})]}),(0,s.jsxs)(_.Button,{variant:"ghost",size:"icon",onClick:()=>n("dark"===a?"light":"dark"),children:[(0,s.jsx)(g.A,{className:"size-4 dark:hidden"}),(0,s.jsx)(y.A,{className:"hidden size-4 dark:block"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}),(0,s.jsxs)(w,{children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsxs)(_.Button,{variant:"ghost",size:"icon",className:"rounded-full",children:[(0,s.jsx)(k.A,{className:"size-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Profile"})]})}),(0,s.jsxs)(U,{align:"end",className:"w-56",children:[(0,s.jsxs)("div",{className:"px-2 py-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium",children:null!==(r=null!==(e=null==i?void 0:i.name)&&void 0!==e?e:null==i?void 0:i.email)&&void 0!==r?r:"User"}),(0,s.jsx)("p",{className:"text-xs text-[var(--muted)]",children:null==i?void 0:i.email})]}),(0,s.jsxs)(A,{onClick:u,children:[(0,s.jsx)(N.A,{className:"mr-2 size-4"}),"Sign out"]})]})]})]})}function P(e){let{children:r}=e,a=(0,o.useRouter)(),i=(0,t.n_)(l.F.users.ensureProfile),d=(0,t.n_)(l.F.seed.seedTasksForNewUser),c=(0,t.IT)(l.F.users.getCurrentUser),u=(0,t.IT)(l.F.tasks.list,{});return((0,n.useEffect)(()=>{if(null===c){a.replace("/login");return}c&&i({}).catch(()=>{})},[c,i,a]),(0,n.useEffect)(()=>{var e;(null==u?void 0:null===(e=u.page)||void 0===e?void 0:e.length)||null==u||!u.isDone||d({}).catch(()=>{})},[u,d]),null===c)?null:void 0===c?(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[var(--background)]",children:(0,s.jsx)("div",{className:"size-8 animate-spin rounded-full border-2 border-[var(--color-primary)] border-t-transparent"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-[var(--background)]",children:[(0,s.jsx)(f,{}),(0,s.jsxs)("div",{className:"pl-64",children:[(0,s.jsx)(F,{}),(0,s.jsx)("main",{className:"p-6",children:r})]})]})}},14085:(e,r,a)=>{"use strict";a.d(r,{Button:()=>d});var s=a(95155),t=a(12115),l=a(12317),n=a(31027),o=a(29602);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[var(--color-primary)] text-white shadow-soft hover:opacity-90 focus-visible:ring-[var(--color-primary)]",secondary:"bg-slate-200 text-slate-900 dark:bg-slate-700 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600",outline:"border border-[var(--border)] bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800",ghost:"hover:bg-slate-100 dark:hover:bg-slate-800",link:"text-[var(--color-primary)] underline-offset-4 hover:underline",success:"bg-avocado text-white hover:opacity-90 focus-visible:ring-avocado",danger:"bg-strawberry text-white hover:opacity-90 focus-visible:ring-strawberry"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,r)=>{let{className:a,variant:t,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(i({variant:t,size:n,className:a})),ref:r,...c})});d.displayName="Button"},81180:(e,r,a)=>{"use strict";a.d(r,{F:()=>s});let s={analytics:{completedPerWeek:{_name:"analytics:completedPerWeek",_type:"query"},priorityDistribution:{_name:"analytics:priorityDistribution",_type:"query"},productivityStreak:{_name:"analytics:productivityStreak",_type:"query"}},seed:{seedTasksForNewUser:{_name:"seed:seedTasksForNewUser",_type:"mutation"}},subscriptions:{getByUserId:{_name:"subscriptions:getByUserId",_type:"query"},createOrUpdate:{_name:"subscriptions:createOrUpdate",_type:"mutation"}},tasks:{list:{_name:"tasks:list",_type:"query"},create:{_name:"tasks:create",_type:"mutation"},update:{_name:"tasks:update",_type:"mutation"},remove:{_name:"tasks:remove",_type:"mutation"},toggleComplete:{_name:"tasks:toggleComplete",_type:"mutation"},dueToday:{_name:"tasks:dueToday",_type:"query"}},users:{getCurrentUser:{_name:"users:getCurrentUser",_type:"query"},updateProfile:{_name:"users:updateProfile",_type:"mutation"},ensureProfile:{_name:"users:ensureProfile",_type:"mutation"}}}},29602:(e,r,a)=>{"use strict";a.d(r,{J:()=>n,cn:()=>l,l:()=>o});var s=a(43463),t=a(69795);function l(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,s.$)(r))}let n={high:"bg-strawberry/15 text-strawberry border-strawberry/30",medium:"bg-lemon/15 text-mango border-lemon/30",low:"bg-avocado/15 text-avocado border-avocado/30"},o={high:"#E63946",medium:"#F4D35E",low:"#2A9D8F"}}},e=>{var r=r=>e(e.s=r);e.O(0,[562,359,105,726,510,627,441,517,358],()=>r(35323)),_N_E=e.O()}]);