(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[835],{15436:(e,t,a)=>{Promise.resolve().then(a.bind(a,83103))},83103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(95155),r=a(74359),l=a(81180),i=a(12115),n=a(30814),o=a(35007),d=a(14085),c=a(9955),u=a(39286),m=a(30042),x=a(25683),p=a(39124),v=a(40767),h=a(29602);function g(e){let{open:t,onOpenChange:a,title:r,description:l,children:i,className:n}=e;return(0,s.jsx)(m.bL,{open:t,onOpenChange:a,children:(0,s.jsx)(x.N,{children:t&&(0,s.jsxs)(m.ZL,{children:[(0,s.jsx)(m.hJ,{asChild:!0,children:(0,s.jsx)(p.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"})}),(0,s.jsx)(m.UC,{asChild:!0,children:(0,s.jsxs)(p.P.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{type:"spring",duration:.3},className:(0,h.cn)("fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-2xl border border-[var(--border)] bg-[var(--card)] p-6 shadow-glass",n),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[r&&(0,s.jsx)(m.hE,{className:"text-lg font-semibold",children:r}),l&&(0,s.jsx)(m.VY,{className:"mt-1 text-sm text-[var(--muted)]",children:l})]}),(0,s.jsx)(m.bm,{asChild:!0,children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",children:[(0,s.jsx)(v.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})})]}),(0,s.jsx)("div",{className:"mt-4",children:i})]})})]})})})}var b=a(25488),f=a(33473),j=a(98867),y=a(60872),N=a(45686);function k(){var e;let[t,a]=(0,i.useState)(""),[m,x]=(0,i.useState)(),[p,v]=(0,i.useState)(),[k,w]=(0,i.useState)("createdAt"),[C,_]=(0,i.useState)("desc"),[D,T]=(0,i.useState)(!1),[F,R]=(0,i.useState)(null),[S,B]=(0,i.useState)(""),[z,A]=(0,i.useState)(""),[E,P]=(0,i.useState)("medium"),[U,O]=(0,i.useState)(""),q=(0,r.IT)(l.F.tasks.list,{search:t||void 0,completed:m,priority:p,sortBy:k,sortOrder:C,limit:50}),L=(0,r.n_)(l.F.tasks.create),I=(0,r.n_)(l.F.tasks.update),J=(0,r.n_)(l.F.tasks.remove),Z=(0,r.n_)(l.F.tasks.toggleComplete),H=null!==(e=null==q?void 0:q.page)&&void 0!==e?e:[];async function W(){if(S.trim())try{await L({title:S.trim(),description:z.trim()||void 0,completed:!1,priority:E,dueDate:U?new Date(U).getTime():void 0}),n.oR.success("Task created"),T(!1),B(""),A(""),P("medium"),O("")}catch(e){n.oR.error(e instanceof Error?e.message:"Failed to create")}}async function M(){if(F&&S.trim())try{let e=H.find(e=>e._id===F);if(!e)return;await I({id:F,title:S.trim(),description:z.trim()||void 0,completed:e.completed,priority:E,dueDate:U?new Date(U).getTime():void 0}),n.oR.success("Task updated"),R(null),B(""),A(""),P("medium"),O("")}catch(e){n.oR.error(e instanceof Error?e.message:"Failed to update")}}async function V(e){try{await J({id:e}),n.oR.success("Task deleted")}catch(e){n.oR.error(e instanceof Error?e.message:"Failed to delete")}}async function Q(e){try{await Z({id:e}),n.oR.success("Task updated")}catch(e){n.oR.error(e instanceof Error?e.message:"Failed to update")}}return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Tasks"}),(0,s.jsxs)(d.Button,{onClick:()=>T(!0),children:[(0,s.jsx)(f.A,{className:"size-4"}),"New task"]})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"pb-4",children:[(0,s.jsx)(o.ZB,{className:"text-lg",children:"Filters"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[(0,s.jsx)(c.p,{placeholder:"Search…",value:t,onChange:e=>a(e.target.value),className:"max-w-xs"}),(0,s.jsxs)("select",{value:void 0===m?"all":m?"done":"todo",onChange:e=>{let t=e.target.value;x("all"===t?void 0:"done"===t)},className:"rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2 text-sm",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"todo",children:"To do"}),(0,s.jsx)("option",{value:"done",children:"Done"})]}),(0,s.jsxs)("select",{value:null!=p?p:"all",onChange:e=>v("all"===e.target.value?void 0:e.target.value),className:"rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2 text-sm",children:[(0,s.jsx)("option",{value:"all",children:"Any priority"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"low",children:"Low"})]}),(0,s.jsxs)("select",{value:k,onChange:e=>w(e.target.value),className:"rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2 text-sm",children:[(0,s.jsx)("option",{value:"createdAt",children:"Created"}),(0,s.jsx)("option",{value:"dueDate",children:"Due date"}),(0,s.jsx)("option",{value:"priority",children:"Priority"})]}),(0,s.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>_(e=>"asc"===e?"desc":"asc"),children:"asc"===C?"↑ Asc":"↓ Desc"})]})]}),(0,s.jsx)(o.Wu,{children:void 0===q?(0,s.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,s.jsx)(b.E,{className:"h-14 w-full"},e))}):0===H.length?(0,s.jsxs)("div",{className:"rounded-xl border border-dashed border-[var(--border)] py-12 text-center text-[var(--muted)]",children:[(0,s.jsx)("p",{className:"font-medium",children:"No tasks yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Create one to get started."}),(0,s.jsxs)(d.Button,{className:"mt-4",onClick:()=>T(!0),children:[(0,s.jsx)(f.A,{className:"size-4"}),"Add task"]})]}):(0,s.jsx)("ul",{className:"space-y-2",children:H.map(e=>(0,s.jsxs)("li",{className:(0,h.cn)("flex items-center gap-3 rounded-xl border border-[var(--border)] px-4 py-3 transition-colors",e.completed&&"opacity-60"),children:[(0,s.jsx)("button",{type:"button",onClick:()=>Q(e._id),className:"rounded-full border-2 border-[var(--border)] p-0.5 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",children:e.completed?(0,s.jsx)(j.A,{className:"size-5 text-avocado"}):(0,s.jsx)("span",{className:"block size-5 rounded-full"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:(0,h.cn)("font-medium",e.completed&&"line-through text-[var(--muted)]"),children:e.title}),e.description&&(0,s.jsx)("p",{className:"truncate text-sm text-[var(--muted)]",children:e.description})]}),(0,s.jsx)(u.E,{variant:e.priority,children:e.priority}),e.dueDate&&(0,s.jsx)("span",{className:"text-xs text-[var(--muted)]",children:new Date(e.dueDate).toLocaleDateString()}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{var t;R(e._id),B(e.title),A(null!==(t=e.description)&&void 0!==t?t:""),P(e.priority),O(e.dueDate?new Date(e.dueDate).toISOString().slice(0,16):"")},children:(0,s.jsx)(y.A,{className:"size-4"})}),(0,s.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>V(e._id),children:(0,s.jsx)(N.A,{className:"size-4 text-strawberry"})})]})]},e._id))})})]}),(0,s.jsx)(g,{open:D,onOpenChange:T,title:"New task",description:"Add a task to your list",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Title"}),(0,s.jsx)(c.p,{value:S,onChange:e=>B(e.target.value),placeholder:"Task title",className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,s.jsx)(c.p,{value:z,onChange:e=>A(e.target.value),placeholder:"Optional",className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Priority"}),(0,s.jsxs)("select",{value:E,onChange:e=>P(e.target.value),className:"mt-1 w-full rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Due date"}),(0,s.jsx)(c.p,{type:"datetime-local",value:U,onChange:e=>O(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,s.jsx)(d.Button,{onClick:W,children:"Create"})]})]})}),(0,s.jsx)(g,{open:!!F,onOpenChange:e=>!e&&R(null),title:"Edit task",description:"Update your task",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Title"}),(0,s.jsx)(c.p,{value:S,onChange:e=>B(e.target.value),placeholder:"Task title",className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,s.jsx)(c.p,{value:z,onChange:e=>A(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Priority"}),(0,s.jsxs)("select",{value:E,onChange:e=>P(e.target.value),className:"mt-1 w-full rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Due date"}),(0,s.jsx)(c.p,{type:"datetime-local",value:U,onChange:e=>O(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>R(null),children:"Cancel"}),(0,s.jsx)(d.Button,{onClick:M,children:"Save"})]})]})})]})}},39286:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155);a(12115);var r=a(31027),l=a(29602);let i=(0,r.F)("inline-flex items-center rounded-lg border px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"border-transparent bg-slate-200 text-slate-900 dark:bg-slate-700 dark:text-slate-100",high:l.J.high,medium:l.J.medium,low:l.J.low,success:"border-avocado/30 bg-avocado/15 text-avocado",warning:"border-lemon/30 bg-lemon/15 text-mango"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(i({variant:a}),t),...r})}},14085:(e,t,a)=>{"use strict";a.d(t,{Button:()=>d});var s=a(95155),r=a(12115),l=a(12317),i=a(31027),n=a(29602);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[var(--color-primary)] text-white shadow-soft hover:opacity-90 focus-visible:ring-[var(--color-primary)]",secondary:"bg-slate-200 text-slate-900 dark:bg-slate-700 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600",outline:"border border-[var(--border)] bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800",ghost:"hover:bg-slate-100 dark:hover:bg-slate-800",link:"text-[var(--color-primary)] underline-offset-4 hover:underline",success:"bg-avocado text-white hover:opacity-90 focus-visible:ring-avocado",danger:"bg-strawberry text-white hover:opacity-90 focus-visible:ring-strawberry"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,n.cn)(o({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},35007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var s=a(95155),r=a(12115),l=a(29602);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-2xl border border-[var(--border)] bg-[var(--card)] text-[var(--card-foreground)] shadow-soft transition-shadow hover:shadow-glass",a),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-[var(--muted)]",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},9955:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(95155),r=a(12115),l=a(29602);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-xl border border-[var(--border)] bg-[var(--background)] px-3 py-2 text-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-[var(--muted)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary)] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},25488:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(95155),r=a(29602);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-xl bg-slate-200 dark:bg-slate-700",t),...a})}},81180:(e,t,a)=>{"use strict";a.d(t,{F:()=>s});let s={analytics:{completedPerWeek:{_name:"analytics:completedPerWeek",_type:"query"},priorityDistribution:{_name:"analytics:priorityDistribution",_type:"query"},productivityStreak:{_name:"analytics:productivityStreak",_type:"query"}},seed:{seedTasksForNewUser:{_name:"seed:seedTasksForNewUser",_type:"mutation"}},subscriptions:{getByUserId:{_name:"subscriptions:getByUserId",_type:"query"},createOrUpdate:{_name:"subscriptions:createOrUpdate",_type:"mutation"}},tasks:{list:{_name:"tasks:list",_type:"query"},create:{_name:"tasks:create",_type:"mutation"},update:{_name:"tasks:update",_type:"mutation"},remove:{_name:"tasks:remove",_type:"mutation"},toggleComplete:{_name:"tasks:toggleComplete",_type:"mutation"},dueToday:{_name:"tasks:dueToday",_type:"query"}},users:{getCurrentUser:{_name:"users:getCurrentUser",_type:"query"},updateProfile:{_name:"users:updateProfile",_type:"mutation"},ensureProfile:{_name:"users:ensureProfile",_type:"mutation"}}}},29602:(e,t,a)=>{"use strict";a.d(t,{J:()=>i,cn:()=>l,l:()=>n});var s=a(43463),r=a(69795);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}let i={high:"bg-strawberry/15 text-strawberry border-strawberry/30",medium:"bg-lemon/15 text-mango border-lemon/30",low:"bg-avocado/15 text-avocado border-avocado/30"},n={high:"#E63946",medium:"#F4D35E",low:"#2A9D8F"}}},e=>{var t=t=>e(e.s=t);e.O(0,[562,359,814,860,510,584,441,517,358],()=>t(15436)),_N_E=e.O()}]);