(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1154:(e,t,n)=>{Promise.resolve().then(n.bind(n,51241)),Promise.resolve().then(n.t.bind(n,73227,23)),Promise.resolve().then(n.t.bind(n,19324,23))},51241:(e,t,n)=>{"use strict";n.d(t,{Providers:()=>c});var r=n(95155),a=n(74359),l=n(73838),o=n(67113),s=n(30814);let i=new a.eH("https://cool-magpie-886.convex.cloud");function c(e){let{children:t}=e;return(0,r.jsx)(l.h,{client:i,children:(0,r.jsxs)(o.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:[t,(0,r.jsx)(s.l$,{richColors:!0,position:"top-right"})]})})}},19324:()=>{},73227:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}},73838:(e,t,n)=>{"use strict";n.d(t,{B:()=>s,h:()=>i});var r=n(95155),a=n(74359),l=n(59012),o=n(12115);function s(){return(0,o.useContext)(c)}function i(e){var t;let{client:n,storage:l,storageNamespace:o,replaceURL:s,children:i}=e;return(0,r.jsx)(v,{client:n,storage:null!=l?l:"undefined"==typeof window?void 0:null===(t=window)||void 0===t?void 0:t.localStorage,storageNamespace:null!=o?o:n.address,replaceURL:null!=s?s:e=>{window.history.replaceState({},"",e)},children:(0,r.jsx)(a.N2,{client:n,useAuth:f,children:i})})}let c=(0,o.createContext)(void 0),u=(0,o.createContext)(void 0),d="__convexAuthOAuthVerifier",m="__convexAuthJWT",h="__convexAuthRefreshToken";function v(e){var t;let{client:n,storage:a,storageNamespace:s,replaceURL:i,children:v}=e,f=(0,o.useRef)(null),[k,b]=(0,o.useState)(!0),[p,S]=(0,o.useState)(!1),C=null===(t=n.options)||void 0===t?void 0:t.verbose,E=(0,o.useCallback)(e=>{C&&console.debug("".concat(new Date().toISOString()," ").concat(e))},[C]),{storageSet:x,storageGet:_,storageRemove:T,storageKey:A}=function(e,t){let n=t.replace(/[^a-zA-Z0-9]/g,""),r=(0,o.useCallback)(e=>"".concat(e,"_").concat(n),[t]);return{storageSet:(0,o.useCallback)((t,n)=>e.setItem(r(t),n),[e,r]),storageGet:(0,o.useCallback)(t=>e.getItem(r(t)),[e,r]),storageRemove:(0,o.useCallback)(t=>e.removeItem(r(t)),[e,r]),storageKey:r}}(a,s),I=(0,o.useCallback)(async e=>{if(null===e.tokens)f.current=null,e.shouldStore&&(await T(m),await T(h)),S(!1);else{let{token:t}=e.tokens;if(f.current=t,e.shouldStore){let{refreshToken:n}=e.tokens;await x(m,t),await x(h,n)}S(!0)}b(!1)},[x,T]);(0,o.useEffect)(()=>{let e=e=>{(async()=>{if(e.storageArea===a&&e.key===A(m)){let t=e.newValue;E("synced access token, is null: ".concat(null===t)),await I({shouldStore:!1,tokens:null===t?null:{token:t}})}})()};return g("storage",e),()=>y("storage",e)},[I]);let L=(0,o.useCallback)(async e=>{let{tokens:t}=await new l.Tb(n.address).action("auth:signIn","code"in e?{params:{code:e.code},verifier:e.verifier}:e);return E("retrieved tokens, is null: ".concat(null===t)),await I({shouldStore:!0,tokens:null!=t?t:null}),null!==t},[n,I]),P=(0,o.useCallback)(async(e,t)=>{var r;let a=t instanceof FormData?Array.from(t.entries()).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{}):null!=t?t:{},l=null!==(r=await _(d))&&void 0!==r?r:void 0;await T(d);let o=await n.action("auth:signIn",{provider:e,params:a,verifier:l});if(void 0!==o.redirect){let e=new URL(o.redirect);return await x(d,o.verifier),void 0!==window.location&&(window.location.href=e.toString()),{signingIn:!1,redirect:e}}if(void 0!==o.tokens){let{tokens:e}=o;return E("signed in and got tokens, is null: ".concat(null===e)),await I({shouldStore:!0,tokens:e}),{signingIn:null!==o.tokens}}return{signingIn:!1}},[n,I,_]),N=(0,o.useCallback)(async()=>{n.action("auth:signOut"),E("signed out, erasing tokens"),await I({shouldStore:!0,tokens:null})},[I,n]),j=(0,o.useCallback)(async e=>{let{forceRefreshToken:t}=e;if(t){let e=f.current;return await w(h,async()=>{var t;let n=f.current;if(n!==e)return E("returning synced token, is null: ".concat(null===n)),n;let r=null!==(t=await _(h))&&void 0!==t?t:null;if(null===r)return E("returning null, there is no refresh token"),null;{await T(h);let e=e=>{e.preventDefault(),e.returnValue=!0};return g("beforeunload",e),await L({refreshToken:r}),y("beforeunload",e),E("returning retrieved token, is null: ".concat(null===n)),f.current}})}return f.current},[L,N,_]),O=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{var e;if(null==a)throw Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");let t=void 0!==(null===(e=window)||void 0===e?void 0:e.location)?new URLSearchParams(window.location.search).get("code"):null;if(O.current||t){if(t){O.current=!0;let e=new URL(window.location.href);e.searchParams.delete("code"),(async()=>{await i(e.pathname+e.search+e.hash),await P(void 0,{code:t}),O.current=!1})()}}else(async()=>{var e;let t=null!==(e=await _(m))&&void 0!==e?e:null;E("retrieved token from storage, is null: ".concat(null===t)),await I({shouldStore:!1,tokens:null===t?null:{token:t}})})()},[n,I,P,_]),(0,r.jsx)(u.Provider,{value:{isLoading:k,isAuthenticated:p,fetchAccessToken:j},children:(0,r.jsx)(c.Provider,{value:{signIn:P,signOut:N},children:v})})}function f(){let{isLoading:e,isAuthenticated:t,fetchAccessToken:n}=(0,o.useContext)(u);return(0,o.useMemo)(()=>({isLoading:e,isAuthenticated:t,fetchAccessToken:n}),[n,e,t])}async function w(e,t){var n,r;let a=null===(r=window)||void 0===r?void 0:null===(n=r.navigator)||void 0===n?void 0:n.locks;return void 0!==a?await a.request(e,t):await t()}function g(e,t,n){var r,a;null===(r=(a=window).addEventListener)||void 0===r||r.call(a,e,t,n)}function y(e,t,n){var r,a;null===(r=(a=window).removeEventListener)||void 0===r||r.call(a,e,t,n)}},67113:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,N:()=>d});var r=n(12115),a=(e,t,n,r,a,l,o,s)=>{let i=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&l?a.map(e=>l[e]||e):a;n?(i.classList.remove(...r),i.classList.add(l&&l[t]?l[t]:t)):i.setAttribute(e,t)}),s&&c.includes(t)&&(i.style.colorScheme=t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n,r=o&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(r)}catch(e){}},l=["light","dark"],o="(prefers-color-scheme: dark)",s="undefined"==typeof window,i=r.createContext(void 0),c={setTheme:e=>{},themes:[]},u=()=>{var e;return null!=(e=r.useContext(i))?e:c},d=e=>r.useContext(i)?r.createElement(r.Fragment,null,e.children):r.createElement(h,{...e}),m=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:a=!0,enableColorScheme:s=!0,storageKey:c="theme",themes:u=m,defaultTheme:d=a?"system":"light",attribute:h="data-theme",value:y,children:k,nonce:b,scriptProps:p}=e,[S,C]=r.useState(()=>f(c,d)),[E,x]=r.useState(()=>"system"===S?g():S),_=y?Object.values(y):u,T=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=g());let r=y?y[t]:t,o=n?w(b):null,i=document.documentElement,c=e=>{"class"===e?(i.classList.remove(..._),r&&i.classList.add(r)):e.startsWith("data-")&&(r?i.setAttribute(e,r):i.removeAttribute(e))};if(Array.isArray(h)?h.forEach(c):c(h),s){let e=l.includes(d)?d:null,n=l.includes(t)?t:e;i.style.colorScheme=n}null==o||o()},[b]),A=r.useCallback(e=>{let t="function"==typeof e?e(S):e;C(t);try{localStorage.setItem(c,t)}catch(e){}},[S]),I=r.useCallback(e=>{x(g(e)),"system"===S&&a&&!t&&T("system")},[S,t]);r.useEffect(()=>{let e=window.matchMedia(o);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),r.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?C(e.newValue):A(d))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[A]),r.useEffect(()=>{T(null!=t?t:S)},[t,S]);let L=r.useMemo(()=>({theme:S,setTheme:A,forcedTheme:t,resolvedTheme:"system"===S?E:S,themes:a?[...u,"system"]:u,systemTheme:a?E:void 0}),[S,A,t,E,a,u]);return r.createElement(i.Provider,{value:L},r.createElement(v,{forcedTheme:t,storageKey:c,attribute:h,enableSystem:a,enableColorScheme:s,defaultTheme:d,value:y,themes:u,nonce:b,scriptProps:p}),k)},v=r.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:l,enableSystem:o,enableColorScheme:s,defaultTheme:i,value:c,themes:u,nonce:d,scriptProps:m}=e,h=JSON.stringify([l,n,i,t,u,c,o,s]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(h,")")}})}),f=(e,t)=>{let n;if(!s){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},w=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(o)),e.matches?"dark":"light")}},e=>{var t=t=>e(e.s=t);e.O(0,[514,359,814,441,517,358],()=>t(1154)),_N_E=e.O()}]);